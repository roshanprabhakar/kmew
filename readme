# Resources

- https://wiki.osdev.org/Main_Page
- https://www.gnu.org/software/grub/
- http://www.jamesmolloy.co.uk/tutorial_html/

# Docker

We need this package in the container: gcc-aarch64-linux-gnu

Create the container:
`docker build env -t kmew-env`

Run the container:
`docker run --rm -it -v "$(pwd)":/root/env kmew-env`

Compile command:
`aarch64-linux-gnu-[gcc/ld]`

# TODO
- linker not recognizing boot.S assembly labels (test with make link)

Run:
qemu-system-aarch64 -machine raspi2b -cpu cortex-a53 -smp cores=1,threads=1 -m 128 -kernel build/kernel.elf -serial stdio -usb -vga std

Debug:
qemu-system-aarch64 -s -S -machine raspi2b -cpu cortex-a53 -smp cores=4,threads=1 -m 1024 -kernel build/kmew_os.elf -serial stdio -usb -vga std
lldb build/kmew_os.elf
(gdb) target remote :1234

on Host
```sh
sh run.sh
gdbserver <-- in Qemu monitor
```

in Docker
```sh
gdb-multiarch build/kmew_os.elf
target remote host.docker.internal 1234
b *0x80000
c
```
